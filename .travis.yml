language: python
python:
    - 2.7
    - 3.4
    - 3.5

os: linux

matrix:
    include:
        - os: osx
          language: generic

addons:
    apt:
        packages:
            - graphviz  # OS X takes forever via brew.

install:
    - sudo pip install networkx
    - sudo pip install pydotplus
    - sudo pip install coverage
    - sudo pip install codecov

before_script:
    - git clone --depth 1 --branch cppdep https://github.com/rakhimov/scram.git

script:
    - coverage run ./networkx_ext.py
    - codecov
    - cd scram
    - coverage run --source=../ ../cppdep.py
    - codecov
    # Just convoluted if-then-else with ||, && only.
    - dot -T pdf -O ./*.dot || [[ -z $(which dot) ]]
